install.packages("readxl")
library(readxl)
resultats_pres2022 <- read_excel("C:/PROJETS_SIG_2024_2025/COURS_R_JH/00_DONNEES/resultats_pres2022.xlsx")
View(resultats_pres2022)
summary(resultats_pres2022$Part_Macron)
summary(resultats_pres2022$Part_abs)
moyenneMacron <- mean(resultats_pres2022$Part_Macron)
moyenneMacron # on appelle la variable créée
paste("La moyenne des % de vote Macron est de ", moyenneMacron)
paste("La moyenne des parts de vote Macron est de ", round(moyenneMacron, digits=2), "%")
summary(resultats_pres2022$Part_abs)
moyenneAbs <- mean(resultats_pres2022$Part_abs)
moyenneAbs # on appelle la variable créée
paste("La moyenne des parts de vote d'abstention est de ", round(moyenneAbs, digits=2), "%")
paste("L'abstention moyenne est de ", round(moyenneMacron, digits=2), "%")
paste("L'abstention moyenne est de ", round(moyenneAbs, digits=2), "%")
Requete1 <- resultats_pres2022 [resultats_pres2022$Part_Jadot > 20 , < 40 ]
Requete2 <- resultats_pres2022 [resultats_pres2022$Part_Jadot > 20 & resultats_pres2022$Part_Jadot < 40 , ]
View (Requete2) # permet de visualiser la nouvelle extraction
voteSaintes <- resultats_pres2022 [resultats_pres2022$Libelle =='Saintes' & resultats_pres2022$Code_dep == '17' ,]
View (voteSaintes) # permet de visualiser la nouvelle extraction
write.csv(voteSaintes)
View(voteSaintes)
export.csv(voteSaintes)
View(voteSaintes)
View(voteSaintes)
View(voteSaintes)
save.image("C:/PROJETS_SIG_2024_2025/COURS_R_JH/ex1.RData")
write.csv(voteSaintes)
export(write.csv(voteSaintes))
write.table(x = voteSaintes)
write.csv(x, file = voteSaintes)
write.csv(file = voteSaintes)
write.csv(x = , file = voteSaintes, col)
write.csv(voteSaintes, "C:\\PROJETS_SIG_2024_2025\\COURS_R_JH\\00_DONNEES\\saintes.csv")
voteSaintes_Candidats1_3 <- resultats_pres2022 == 'Saintes' & resultats_pres2022$Code_dep == '17' , [, c ("Part_LePen", "Part_Macron", "Part_Melenchon")]
voteSaintes_Candidats1_3 <- resultats_pres2022 == 'Saintes' & resultats_pres2022$Code_dep == '17' [, c ("Part_LePen", "Part_Macron", "Part_Melenchon")]
voteSaintes_Candidats1_3 <- resultats_pres2022 [, c ("Part_LePen", "Part_Macron", "Part_Melenchon")]
voteSaintes_Candidats1_3 <- resultats_pres2022 == 'Saintes' [, c ("Part_LePen", "Part_Macron", "Part_Melenchon")]
voteSaintes_Candidats1_3 <- resultats_pres2022 [, v ('Saintes') ] , [, c ("Part_LePen", "Part_Macron", "Part_Melenchon")]
voteSaintes_Candidats1_3 <- resultats_pres2022 [ resultats_pres2022$Libelle== 'Saintes' & resultats_pres2022$Code_dep =='17', ("Part_LePen", "Part_Macron", "Part_Melenchon")]
voteSaintes_Candidats1_3 <- resultats_pres2022 [ resultats_pres2022$Libelle== 'Saintes' & resultats_pres2022$Code_dep =='17' ("Part_LePen", "Part_Macron", "Part_Melenchon")]
voteSaintes_Candidats1_3 <- resultats_pres2022 [ resultats_pres2022$Libelle== 'Saintes' & resultats_pres2022$Code_dep == '17' ("Part_LePen", "Part_Macron", "Part_Melenchon")]
voteSaintes_Candidats1_3 <- resultats_pres2022 [ resultats_pres2022$Libelle== 'Saintes' & resultats_pres2022$Code_dep == '17' [("Part_LePen", "Part_Macron", "Part_Melenchon")]
voteSaintes_Candidats1_3 <- resultats_pres2022 [ resultats_pres2022$Libelle== 'Saintes' & resultats_pres2022$Code_dep == '17' ("Part_LePen" , "Part_Macron" , "Part_Melenchon")]
voteSaintes_Candidats1_3 <- resultats_pres2022 [ resultats_pres2022$Libelle== 'Saintes' & resultats_pres2022$Code_dep == '17'] & [("Part_LePen" , "Part_Macron" , "Part_Melenchon")]
View(voteSaintes)
voteSaintes_Candidats1_3 <- voteSaintes [ , c("Part_Macron", "Part_LePen", "Part_Melenchon")]
View(voteSaintes_Candidats1_3)
View(voteSaintes_Candidats1_3)
sapply(voteSaintes_Candidats1_3, class(Code_BV))
sapply(voteSaintes_Candidats1_3, class)
typeof(voteSaintes_Candidats1_3)
voteSaintes_Candidats1_3$MacronSup30 <- ifelse(voteSaintes_Candidats1_3$Part_Macron > 30%)
voteSaintes_Candidats1_3$MacronSup30 <- ifelse(voteSaintes_Candidats1_3$Part_Macron > 30, NA)
voteSaintes_Candidats1_3$MacronSup30 <- voteSaintes_Candidats1_3$Part_Macron > 30)
voteSaintes_Candidats1_3$MacronSup30 <- voteSaintes_Candidats1_3$Part_Macron > 30
voteSaintes_Candidats1_3$MacronSup30 <- ifelse(voteSaintes_Candidats1_3$Part_Macron > 30)
voteSaintes_Candidats1_3$newcol <- ifelse(voteSaintes_Candidats1_3$Part_Macron > 30, MAcronSup30)
voteSaintes_Candidats1_3$newcol <- ifelse(voteSaintes_Candidats1_3$Part_Macron > 30, NA)
lapply(x, length(voteSaintes_Candidats1_3))
by(voteSaintes_Candidats1_3,voteSaintes_Candidats1_3$MacronSup30,nrow)
summary(resultats_pres2022$Part_Arthaud)
maximunArthaud <- mean(resultats_pres2022$Part_Arthaud)
> maximunArthaud # on appelle la variable créée
maxArthaud <- mean(resultats_pres2022$Part_Arthaud)
maxArthaud
save.image("C:/PROJETS_SIG_2024_2025/COURS_R_JH/ex1bis.RData")
sapply(maxArthaud, mean)
sapply(voteSaintes_Candidats1_3$Part_Arthaud)
sapply(voteSaintes_Candidats1_3$Part_Arthaud, mean)
voteSaintes_Candidats1_3$Part_Arthaud
apply(resultats_pres2022$Part_Arthaud, mean)
resultats_pres2022$Part_Arthaud
sapply(resultats_pres2022$Part_Arthaud, mean)
sd(voteSaintes_Candidats1_3 $Part_Macron)
sd(voteSaintes_Candidats1_3 $Part_LePen)
sd(voteSaintes_Candidats1_3 $Part_Melenchon)
voteSaintes_Candidats1_3MacronSup30 <- ifelse(voteSaintes_Candidats1_3$Part_Macron > 30, 'MacronSup30', NA)
View(voteVaucluse)
voteVaucluse <- resultats_pres2022 [resultats_pres2022$Code_dep == '84']
voteVaucluse <- resultats_pres2022 [resultats_pres2022$Code_dep == '84' ,]
View(voteVaucluse)
tapply(voteVaucluse$Part_Arthaud,voteVaucluse$Libelle, mean )
# On définit les noms des candidats dans une variable nommée « col1 »
col1 <- c("Macron", "Melenchon", "Le Pen", "Pecresse")
# On reprend les % de vote issus de l’extraction précédente, dans une variable nommée « col2 »
col2 <- c(mean(voteCandidats1_4$Part_Macron), mean(voteCandidats1_4$Part_Melenchon), mean(voteCandidats1_4$Part_LePen),
mean(voteCandidats1_4$Part_Pecresse))
# On définit les noms des candidats dans une variable nommée « col1 »
col1 <- c("Macron", "Melenchon", "Le Pen", "Pecresse")
# On reprend les % de vote issus de l’extraction précédente, dans une variable nommée « col2 »
col2 <- c(mean(voteSaintes_Candidats1_3$Part_Macron), mean(voteSaintes_Candidats1_3$Part_Melenchon), mean(voteSaintes_Candidats1_3$Part_LePen),
mean(voteSaintes_Candidats1_3$Part_Pecresse))
# On crée le tableau de données du graphique en spécifiant que les valeurs du graph correspondent à « col2 »
data <- data.frame(group=col1, value=col2)
# On crée le graphique :
ggplot(data= data, aes(x=reorder(group, -value), y=value, fill=group)) +
geom_bar(stat="identity")+
# On ajoute les valeurs de % de vote sur le graph et on personnalise les couleurs
geom_text(aes(label=round(value, digits=2)), vjust=1.6, color="white", size=3.5)+
scale_fill_manual(values = c("#0a3895", "#b831f3","#f33157", "#6091f6")) # Ordonné selon l’ordre alphabétique des noms de candidats
# On définit les noms des candidats dans une variable nommée « col1 »
col1 <- c("Melenchon", "Jadot", "Hidalgo")
# On reprend les % de vote issus de l’extraction précédente, dans une variable nommée « col2 »
col2 <- c(mean(resultats_pres2022$Part_Hidalgo), mean(resultats_pres2022$Part_Melenchon), mean(resultats_pres2022$Part_Jadot))
# On crée le tableau de données du graphique en spécifiant que les valeurs du graph correspondent à « col2 »
data <- data.frame(group=col1, value=col2)
# On crée le graphique :
ggplot(data, aes(x="", y=value , fill=group)) +
geom_bar(stat="identity", width=1) +
geom_col() +
coord_polar("y", start=0) + # coord_polar permet de convertir des barres en cercles
# On ajoute les valeurs de % de vote sur le graph et on personnalise les couleurs
geom_text(aes(label = round(value, digits=2)), position = position_stack(vjust = 0.5)) +
scale_fill_manual(values = c("#b674e4", "#e4ac74", "#74b5e4")) # Ordonné selon l’ordre alphabétique des noms de candidats
# On définit les noms des candidats dans une variable nommée « col1 »
> col1 <- c("Melenchon", "Jadot", "Hidalgo")
# On définit les noms des candidats dans une variable nommée « col1 »
> col1 <- c("Melenchon", "Jadot", "Hidalgo")
# On définit les noms des candidats dans une variable nommée « col1 »> col1 <- c("Melenchon", "Jadot", "Hidalgo")
> # On reprend les % de vote issus de l’extraction précédente, dans une variable nommée « col2 »
# On définit les noms des candidats dans une variable nommée « col1 »
col1 <- c("Melenchon", "Jadot", "Hidalgot")
# On reprend les % de vote issus de l’extraction précédente, dans une variable nommée « col2 »
col2 <- c(mean(resultats_pres2022$Part_Melenchon), mean(resultats_pres2022$Part_Jadot), mean(resultats_pres2022$Part_Hidalgo))
# On crée le tableau de données du graphique en spécifiant que les valeurs du graph correspondent à « col2 »
data <- data.frame(group=col1, value=col2)
# On crée le graphique :
ggplot(data, aes(x="", y=value , fill=group)) +
geom_bar(stat="identity", width=1) +
geom_col() +
coord_polar("y", start=0) + # coord_polar permet de convertir des barres en cercles
# On ajoute les valeurs de % de vote sur le graph et on personnalise les couleurs
geom_text(aes(label = round(value, digits=2)), position = position_stack(vjust = 0.5)) +
scale_fill_manual(values = c("#b674e4", "#e4ac74", "#74b5e4")) # Ordonné selon l’ordre alphabétique des noms de
col1 <- c("Melenchon", "Jadot", "Hidalgot")
col2 <- c(mean(resultats_pres2022$Part_Melenchon), mean(resultats_pres2022$Part_Jadot), mean(resultats_pres2022$Part_Hidalgo))
data <- data.frame(group=col1, value=col2)
ggplot(data, aes(x="", y=value , fill=group)) +
geom_bar(stat="identity", width=1) +
geom_col() +
coord_polar("y", start=0) +
geom_text(aes(label = round(value, digits=2)), position = position_stack(vjust = 0.5)) +
scale_fill_manual(values = c("#b674e4", "#e4ac74", "#74b5e4"))
install.packages("ggplot2")
col1 <- c("Melenchon", "Jadot", "Hidalgot")
col2 <- c(mean(resultats_pres2022$Part_Melenchon), mean(resultats_pres2022$Part_Jadot), mean(resultats_pres2022$Part_Hidalgo))
data <- data.frame(group=col1, value=col2)
ggplot(data, aes(x="", y=value , fill=group)) +
geom_bar(stat="identity", width=1) +
geom_col() +
coord_polar("y", start=0) +
geom_text(aes(label = round(value, digits=2)), position = position_stack(vjust = 0.5)) +
scale_fill_manual(values = c("#b674e4", "#e4ac74", "#74b5e4"))
library(ggplot2)
col1 <- c("Melenchon", "Jadot", "Hidalgot")
col2 <- c(mean(resultats_pres2022$Part_Melenchon), mean(resultats_pres2022$Part_Jadot), mean(resultats_pres2022$Part_Hidalgo))
data <- data.frame(group=col1, value=col2)
ggplot(data, aes(x="", y=value , fill=group)) +
geom_bar(stat="identity", width=1) +
geom_col() +
coord_polar("y", start=0) +
geom_text(aes(label = round(value, digits=2)), position = position_stack(vjust = 0.5)) +
scale_fill_manual(values = c("#b674e4", "#e4ac74", "#74b5e4"))
> col1 <- c("Melenchon", "Jadot", "Hidalgot")
> voteLaRochelle <- resultats_pres2022 [resultats_pres2022$Libelle == 'La Rochelle' ,]
voteLaRochelle <- resultats_pres2022 [resultats_pres2022$Libelle == 'La Rochelle' ,]
View(voteLaRochelle)
col1 <- c("Melenchon", "Jadot", "Hidalgot")
col2 <- c(mean(voteLaRochelle$Part_Melenchon), mean(voteLaRochelle$Part_Jadot), mean(voteLaRochelle$Part_Hidalgo))
data <- data.frame(group=col1, value=col2)
ggplot(data, aes(x="", y=value , fill=group)) +
geom_bar(stat="identity", width=1) +
geom_col() +
coord_polar("y", start=0) +
geom_text(aes(label = round(value, digits=2)), position = position_stack(vjust = 0.5)) +
scale_fill_manual(values = c("#b674e4", "#e4ac74", "#74b5e4"))
voteRochefort_Candidats1_4 <- voteRochefort [ , c("Code_BV", "Part_Macron", "Part_LePen", "Part_Melenchon",
"Part_Pecresse")]
> > voteRochefort <- resultats_pres2022 [resultats_pres2022$Libelle == 'Rochefort' ,]
voteRochefort <- resultats_pres2022 [resultats_pres2022$Libelle == 'Rochefort' ,]
View(voteRochefort)
voteRochefort_Candidats1_4 <- voteRochefort [ , c("Code_BV", "Part_Macron", "Part_LePen", "Part_Melenchon",
"Part_Pecresse")]
# On reformatte le tableau de données (nécessite le package tidyr)
reformat <-
voteRochefort_Candidats1_4 %>% pivot_longer(cols=c("Part_Macron", "Part_LePen", "Part_Melenchon", "Part_Pecresse"),
names_to='candidats', values_to='parts')
install.packages("tidyr")
library(tidyr)
voteRochefort_Candidats1_4 <- voteRochefort [ , c("Code_BV", "Part_Macron", "Part_LePen", "Part_Melenchon",
"Part_Pecresse")]
reformat <- voteRochefort_Candidats1_4 %>% pivot_longer(cols=c("Part_Macron", "Part_LePen", "Part_Melenchon", "Part_Pecresse"),
names_to='candidats', values_to='parts')
ggplot(data=reformat, aes(x=candidats,y=parts,fill=candidats)) +
geom_bar(stat="identity") +
facet_wrap(~Code_BV) +
ggtitle("Parts de vote dans les BV de Rochefort") +
theme(plot.title = element_text(family="Trebuchet MS", face="bold", size=20, hjust=0, color="#555555")) +
theme(axis.text.x = element_text(angle=90)) +
scale_fill_manual(values = c("#0a3895", "#b831f3","#f33157", "#6091f6"))
voteRoyan <- resultats_pres2022 [resultats_pres2022$Libelle == 'Royan' ,]
voteRoyan <- resultats_pres2022 [resultats_pres2022$Libelle == 'Royan' ,]
View(voteRoyan)
voteRoyan_Candidats1_4 <- voteRoyan [ , c("Code_BV", "Part_Jadot", "Part_Hidalgo", "Part_Melenchon")]
reformat <- voteRochefort_Candidats1_4 %>% pivot_longer(cols=c("Part_Jadot", "Part_Hidalgo", "Part_Melenchon"),
names_to='candidats', values_to='parts')
voteRoyan_Candidats1_4 <- voteRoyan [ , c("Code_BV", "Part_Pecresse", "Part_Hidalgo", "Part_Melenchon")]
reformat <- voteRochefort_Candidats1_4 %>% pivot_longer(cols=c("Part_Pecresse", "Part_Hidalgo", "Part_Melenchon"),
names_to='candidats', values_to='parts')
voteRoyan_Candidats1_4 <- voteRoyan [ , c("Code_BV", "Part_Pecresse", "Part_Hidalgo", "Part_Melenchon")]
reformat <- voteRochefort_Candidats1_4 %>% pivot_longer(cols=c("Part_Pecresse", "Part_Hidalgo", "Part_Melenchon"), names_to='candidats', values_to='parts')
voteRoyan_Candidats1_4 <- voteRoyan [ , c("Code_BV", "voteRoyan$Part_Pecresse", "voteRoyan$Part_Hidalgo", "voteRoyan$Part_Melenchon")]
rlang::last_trace()
voteRoyan_Candidats1_4 <- voteRoyan [ , c("Code_BV", "voteRoyan$Part_Pecresse", "voteRoyan$Part_Hidalgo", "voteRoyan$Part_Melenchon")]
voteRoyan_Candidats1_4 <- voteRoyan [ , c("Code_BV", "Part_Pecresse", "Part_Hidalgo", "Part_Melenchon")]
reformat <- voteRoyan_Candidats1_3 %>% pivot_longer(cols=c("Part_Pecresse", "Part_Hidalgo", "Part_Melenchon"),
names_to='candidats', values_to='parts')
voteRoyan_Candidats1_3 <- voteRoyan [ , c("Code_BV", "Part_Pecresse", "Part_Hidalgo", "Part_Melenchon")]
reformat <- voteRoyan_Candidats1_3 %>% pivot_longer(cols=c("Part_Pecresse", "Part_Hidalgo", "Part_Melenchon"),
names_to='candidats', values_to='parts')
ggplot(data=reformat, aes(x=candidats,y=parts,fill=candidats)) +
geom_bar(stat="identity") +
facet_wrap(~Code_BV) +
ggtitle("Parts de vote dans les BV de Royan") +
theme(plot.title = element_text(family="Caladea", size=20, hjust=0, color="#555555")) +
theme(axis.text.x = element_text(angle=90)) +
scale_fill_manual(values = c("#e4ac74", "#74dde4","#c774e4"))
voteRoyan_Candidats1_3 <- voteRoyan [ , c("Code_BV", "Part_Pecresse", "Part_Hidalgo", "Part_Melenchon")]
reformat <- voteRoyan_Candidats1_3 %>% pivot_longer(cols=c("Part_Pecresse", "Part_Hidalgo", "Part_Melenchon"),
names_to='candidats', values_to='parts')
ggplot(data, aes(x=candidats,y=parts,fill=candidats)) +
geom_bar(stat="identity") +
geom_col()+
coord_polar("y", start=0)
voteRoyan_Candidats1_3 <- voteRoyan [ , c("Code_BV", "Part_Pecresse", "Part_Hidalgo", "Part_Melenchon")]
reformat <- voteRoyan_Candidats1_3 %>% pivot_longer(cols=c("Part_Pecresse", "Part_Hidalgo", "Part_Melenchon"),
names_to='candidats', values_to='parts')
ggplot(data=reformat, aes(x=candidats,y=parts,fill=candidats)) +
geom_bar(stat="identity") +
geom_col()+
coord_polar("y", start=0)
facet_wrap(~Code_BV) +
ggtitle("Parts de vote dans les BV de Royan") +
theme(plot.title = element_text(family="Caladea", size=20, hjust=0, color="#555555")) +
theme(axis.text.x = element_text(angle=90)) +
scale_fill_manual(values = c("#e4ac74", "#74dde4","#c774e4"))
voteRoyan_Candidats1_3 <- voteRoyan [ , c("Code_BV", "Part_Pecresse", "Part_Hidalgo", "Part_Melenchon")]
reformat <- voteRoyan_Candidats1_3 %>% pivot_longer(cols=c("Code_BV", "Part_Pecresse", "Part_Hidalgo", "Part_Melenchon"),
names_to='candidats', values_to='parts')
voteRoyan_Candidats1_3 <- voteRoyan [ , c("Code_BV", "Part_Pecresse", "Part_Hidalgo", "Part_Melenchon")]
reformat <- voteRoyan_Candidats1_3 %>% pivot_longer(cols=c("Part_Pecresse", "Part_Hidalgo", "Part_Melenchon"),
names_to='candidats', values_to='parts')
ggplot(data=reformat, aes(x=candidats,y=parts,fill=candidats)) +
geom_bar(stat="identity") +
geom_col()+
coord_polar("y", start=0)
facet_wrap(~Code_BV) +
ggtitle("Parts de vote dans les BV de Royan") +
theme(plot.title = element_text(family="Caladea", size=20, hjust=0, color="#555555")) +
theme(axis.text.x = element_text(angle=90)) +
scale_fill_manual(values = c("#bde474","#e4ac74", "#74dde4","#c774e4"))
install.packages("RPostgres")
install.packages("RPostgreSQL")
install.packages("DBI")
library(RPostgres)
library(RPostgreSQL)
db <- "postgres"
db_host <- "localhost"
db_port <- "5432"
db_user <- "postgres"
db_pass <- "(VabandusT)24"
conn <- dbConnect(RPostgres::Postgres(),dbname = db,host = db_host,port = db_port,user = db_user,password = db_pass)
conn
requete <- dbGetQuery(conn, 'SELECT * from php.form;')
ALTER TABLE form
ALTER TABLE form
DROP COLUMN typedemande
ALTER TABLE form
install.packages("RSQLite")
library(RSQLite)
ALTER TABLE form
requete <- dbGetQuery(conn, 'ALTER TABLE form DROP ROW * FROM php.form WHERE typedemande='1';')
requete <- dbGetQuery(conn, 'ALTER TABLE form DROP * FROM php.form WHERE typedemande='1';')
requete <- dbGetQuery(conn, 'ALTER TABLE form DROP * FROM php.form WHERE typedemande=1;')
requete <- dbGetQuery(conn, 'ALTER TABLE form DROP ROW * FROM php.form WHERE typedemande=1;')
requete <- dbGetQuery(conn, 'ALTER TABLE form DELETE * FROM php.form WHERE typedemande=1;')
requete <- dbGetQuery(conn, 'ALTER TABLE form DROP ROW * FROM php.form WHERE typedemande=1;')
requete <- dbGetQuery(conn, 'ALTER TABLE form DELETE ROW * FROM php.form WHERE typedemande=1;')
requete <- dbGetQuery(conn, 'SELECT typedemande FROM php.form WHERE typedemande=1;')
requete <- dbGetQuery(conn, 'SELECT typedemande FROM php.form WHERE typedemande='1';')
requete <- dbGetQuery(conn, 'SELECT typedemande FROM php.form WHERE typedemande=1;')
requete <- dbGetQuery(conn, 'SELECT typedemande FROM php.form WHERE typedemande="1";')
requete <- dbGetQuery(conn, 'SELECT typedemande FROM php.form WHERE typedemande LIKE "1";')
requete <- dbGetQuery(conn, 'SELECT typedemande FROM php.form WHERE typedemande LIKE 1;')
requete <- dbGetQuery(conn, 'SELECT typedemande FROM php.form WHERE typedemande LIKE '1';')
install.packages("rmarkdown")
library(rmarkdown)
save.image("C:/PROJETS_SIG_2024_2025/COURS_R_JH/again.RData")
# Test
---
title: "Rapport R"
title: "Rapport R"
View(reformat)
ggplot(data=reformat, aes(x=candidats,y=parts,fill=candidats)) +
geom_bar(stat="identity") +
geom_col()+
coord_polar("y", start=0)
facet_wrap(~Code_BV) +
ggtitle("Parts de vote dans les BV de Royan") +
theme(plot.title = element_text(family="Caladea", size=20, hjust=0, color="#555555")) +
theme(axis.text.x = element_text(angle=90)) +
scale_fill_manual(values = c("#bde474","#e4ac74", "#74dde4","#c774e4"))
conn
requete
requete2 <- dbGetQuery(conn, "DELETE FROM php.form WHERE typedemande = '1'") #ne fonctionne toujours pas
requete
requete2 <- dbGetQuery(conn, "DELETE FROM php.form WHERE typedemande = '1'")
requete2 <- dbGetQuery(conn, "select * from php.f)orm")
requete2 <- dbGetQuery(conn, "select * from php.form")
requete2
requete2 <- dbGetQuery(conn, "DELETE FROM php.form WHERE typedemande = '3'")
requete <- dbGetQuery(conn, "select * from php.form")
requete
ggplot(data=reformat, aes(x=candidats,y=parts,fill=candidats)) +
geom_bar(stat="identity") +
geom_col()+
coord_polar("y", start=0)+
facet_wrap(~Code_BV) +
ggtitle("Parts de vote dans les BV de Royan") +
theme(plot.title = element_text(family="Caladea", size=20, hjust=0, color="#555555")) +
theme(axis.text.x = element_text(angle=90)) +
scale_fill_manual(values = c("#bde474","#e4ac74", "#74dde4","#c774e4"))
library(ggplot2)
library(RPostgreSQL)
library(RSQLite)
library(tidyr)
title: "Rapport R"
#"Rapport R"
output: html_document
---
title: "Rapport R"
---
title: "Rapport R"
"Rapport R"
output: html_document
extraitGares <- barometre_sncf_2019 [barometre_sncf_2019$Typologie_gare == 123 & barometre_sncf_2019$Agence == 'Nelle Aquitaine' ,]
load("C:/PROJETS_SIG_2024_2025/COURS_R_JH/00_DONNEES/barometre_sncf_2019.xlsx")
load("C:/PROJETS_SIG_2024_2025/COURS_R_JH/00_DONNEES/barometre_sncf_2019.xlsx")
library(readxl)
barometre_sncf_2019 <- read_excel("C:/PROJETS_SIG_2024_2025/COURS_R_JH/00_DONNEES/barometre_sncf_2019.xlsx")
View(barometre_sncf_2019)
extraitGares <- barometre_sncf_2019 [barometre_sncf_2019$Typologie_gare == 123 & barometre_sncf_2019$Agence == 'Nelle Aquitaine' ,]
extraitGares$moyenne <- (extraitGares$Infos + extraitGares$Deplacement + extraitGares$Proprete + extraitGares$Agreable + extraitGares$Satisfaction + extraitGares$Services)/6
stats <- summary(extraitGares$moyenne)
extraitGaresReq <- extraitGares [extraitGares$moyenne > 7.5  ,]
extraitGares2 <- extraitGares2[ , c("Gare", "Infos", "Deplacement", "Proprete", "Agreable", "Satisfaction", "Services")]
extraitGares <- barometre_sncf_2019 [barometre_sncf_2019$Typologie_gare == 123 & barometre_sncf_2019$Agence == 'Nelle Aquitaine' ,]
extraitGares$moyenne <- (extraitGares$Infos + extraitGares$Deplacement + extraitGares$Proprete + extraitGares$Agreable + extraitGares$Satisfaction + extraitGares$Services)/6
stats <- summary(extraitGares$moyenne)
extraitGaresReq <- extraitGares [extraitGares$moyenne > 7.5  ,]
extraitGares2 <- extraitGares2 [ , c("Gare", "Infos", "Deplacement", "Proprete", "Agreable", "Satisfaction", "Services")]
extraitGares <- barometre_sncf_2019 [barometre_sncf_2019$Typologie_gare == 123 & barometre_sncf_2019$Agence == 'Nelle Aquitaine' ,]
extraitGares$moyenne <- (extraitGares$Infos + extraitGares$Deplacement + extraitGares$Proprete + extraitGares$Agreable + extraitGares$Satisfaction + extraitGares$Services)/6
stats <- summary(extraitGares$moyenne)
extraitGaresReq <- extraitGares [extraitGares$moyenne > 7.5  ,]
extraitGares2 <- extraitGares2 [ , c("Gare", "Infos", "Deplacement", "Proprete", "Agreable", "Satisfaction", "Services") ,]
extraitGares <- barometre_sncf_2019 [barometre_sncf_2019$Typologie_gare == 123 & barometre_sncf_2019$Agence == 'Nelle Aquitaine' ,]
extraitGares$moyenne <- (extraitGares$Infos + extraitGares$Deplacement + extraitGares$Proprete + extraitGares$Agreable + extraitGares$Satisfaction + extraitGares$Services)/6
stats <- summary(extraitGares$moyenne)
extraitGaresReq <- extraitGares [extraitGares$moyenne > 7.5  ,]
extraitGares2 <- extraitGares [ , c("Gare", "Infos", "Deplacement", "Proprete", "Agreable", "Satisfaction", "Services")]
reformat <-
extraitGares2  %>% pivot_longer(cols=c("Infos", "Deplacement", "Proprete", "Agreable", "Satisfaction", "Services"),
names_to='critere', values_to='notes')
ggplot(data=reformat, aes(x=critere,y=notes,fill=critere)) +
geom_bar(stat="identity") +
facet_wrap(~Gare) +
ggtitle("Note par gare") +
theme(plot.title = element_text(family="Trebuchet MS", face="bold", size=20, hjust=0, color="#555555")) +
theme(axis.text.x = element_text(angle=90)) +
coord_cartesian(ylim = c(7, 9))
savehistory(file="...........")
extraitGares <- barometre_sncf_2019 [barometre_sncf_2019$Typologie_gare == 123 & barometre_sncf_2019$Agence == 'Nelle Aquitaine' ,]
extraitGares$moyenne <- (extraitGares$Infos + extraitGares$Deplacement + extraitGares$Proprete + extraitGares$Agreable + extraitGares$Satisfaction + extraitGares$Services)/6
stats <- summary(extraitGares$moyenne)
extraitGaresReq <- extraitGares [extraitGares$moyenne > 7.5  ,]
extraitGares2 <- extraitGares [ , c("Gare", "Infos", "Deplacement", "Proprete", "Agreable", "Satisfaction", "Services")]
reformat <-
extraitGares2  %>% pivot_longer(cols=c("Infos", "Deplacement", "Proprete", "Agreable", "Satisfaction", "Services"),
names_to='critere', values_to='notes')
ggplot(data=reformat, aes(x=critere,y=notes,fill=critere)) +
geom_bar(stat="identity") +
facet_wrap(~Gare) +
ggtitle("Note par gare") +
theme(plot.title = element_text(family="Trebuchet MS", face="bold", size=20, hjust=0, color="#555555")) +
theme(axis.text.x = element_text(angle=90)) +
coord_cartesian(ylim = c(7, 9))
savehistory(file="C://PROJETS_SIG_2024_2025//COURS_R_JH//02_RESULTATS//results")
